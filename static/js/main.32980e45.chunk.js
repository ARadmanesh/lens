(this.webpackJsonplens=this.webpackJsonplens||[]).push([[0],{135:function(e,t,n){},139:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(21),o=n.n(i),r=n(108),c=n(58),s=n(140),l={en:{title:"English",direction:"ltr"},fa:{title:"\u0641\u0627\u0631\u0633\u06cc",direction:"rtl"},ar:{title:"\u0639\u0631\u0628\u06cc",direction:"rtl"}};r.a.use(s.a).use(c.e).init({lng:"en",fallbackLng:"en",debug:!1,keySeparator:!1,backend:{loadPath:"/locales/{{lng}}.json"}});var u=r.a,d=n(56),b=n(26),j=n(15),m=n(3),p=n(9),h=n(362),f=n(363),O=n(364),g=n(365),x=n(330),v=n(376),y=n(334),S=n(373),k=n(149),w=n(378),A=Object(k.a)({palette:{type:"dark",primary:{main:"#039be5"},secondary:{main:"#f06292"}},typography:{fontFamily:["Vazir","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),N=Object(k.a)({direction:"rtl",palette:{type:"dark",primary:{main:"#039be5"},secondary:{main:"#f06292"}},typography:{fontFamily:["Vazir","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),C=Object(w.a)(A),I=Object(w.a)(N),T=n(333),R=n(377),P=n(1);function D(e){var t=e.finished,n=e.redirectTo,a=e.onNext,i=Object(R.a)().t;return Object(P.jsx)(x.a,{container:!0,direction:"row",justifyContent:"flex-end",children:Object(P.jsxs)(x.a,{item:!0,children:[!t&&Object(P.jsx)(T.a,{variant:"contained",color:"primary",onClick:a,children:i("next")}),t&&n&&Object(P.jsx)(T.a,{variant:"contained",color:"primary",href:n,children:i("finish_and_redirect")})]})})}var E=n(367),M=n(371),F=n(19),L=n.n(F),_=[{code:"AD",label:"Andorra",phone:"376"},{code:"AE",label:"United Arab Emirates",phone:"971"},{code:"AF",label:"Afghanistan",phone:"93"},{code:"AG",label:"Antigua and Barbuda",phone:"1-268"},{code:"AI",label:"Anguilla",phone:"1-264"},{code:"AL",label:"Albania",phone:"355"},{code:"AM",label:"Armenia",phone:"374"},{code:"AO",label:"Angola",phone:"244"},{code:"AQ",label:"Antarctica",phone:"672"},{code:"AR",label:"Argentina",phone:"54"},{code:"AS",label:"American Samoa",phone:"1-684"},{code:"AT",label:"Austria",phone:"43"},{code:"AU",label:"Australia",phone:"61",suggested:!0},{code:"AW",label:"Aruba",phone:"297"},{code:"AX",label:"Alland Islands",phone:"358"},{code:"AZ",label:"Azerbaijan",phone:"994"},{code:"BA",label:"Bosnia and Herzegovina",phone:"387"},{code:"BB",label:"Barbados",phone:"1-246"},{code:"BD",label:"Bangladesh",phone:"880"},{code:"BE",label:"Belgium",phone:"32"},{code:"BF",label:"Burkina Faso",phone:"226"},{code:"BG",label:"Bulgaria",phone:"359"},{code:"BH",label:"Bahrain",phone:"973"},{code:"BI",label:"Burundi",phone:"257"},{code:"BJ",label:"Benin",phone:"229"},{code:"BL",label:"Saint Barthelemy",phone:"590"},{code:"BM",label:"Bermuda",phone:"1-441"},{code:"BN",label:"Brunei Darussalam",phone:"673"},{code:"BO",label:"Bolivia",phone:"591"},{code:"BR",label:"Brazil",phone:"55"},{code:"BS",label:"Bahamas",phone:"1-242"},{code:"BT",label:"Bhutan",phone:"975"},{code:"BV",label:"Bouvet Island",phone:"47"},{code:"BW",label:"Botswana",phone:"267"},{code:"BY",label:"Belarus",phone:"375"},{code:"BZ",label:"Belize",phone:"501"},{code:"CA",label:"Canada",phone:"1",suggested:!0},{code:"CC",label:"Cocos (Keeling) Islands",phone:"61"},{code:"CD",label:"Congo, Democratic Republic of the",phone:"243"},{code:"CF",label:"Central African Republic",phone:"236"},{code:"CG",label:"Congo, Republic of the",phone:"242"},{code:"CH",label:"Switzerland",phone:"41"},{code:"CI",label:"Cote d'Ivoire",phone:"225"},{code:"CK",label:"Cook Islands",phone:"682"},{code:"CL",label:"Chile",phone:"56"},{code:"CM",label:"Cameroon",phone:"237"},{code:"CN",label:"China",phone:"86"},{code:"CO",label:"Colombia",phone:"57"},{code:"CR",label:"Costa Rica",phone:"506"},{code:"CU",label:"Cuba",phone:"53"},{code:"CV",label:"Cape Verde",phone:"238"},{code:"CW",label:"Curacao",phone:"599"},{code:"CX",label:"Christmas Island",phone:"61"},{code:"CY",label:"Cyprus",phone:"357"},{code:"CZ",label:"Czech Republic",phone:"420"},{code:"DE",label:"Germany",phone:"49",suggested:!0},{code:"DJ",label:"Djibouti",phone:"253"},{code:"DK",label:"Denmark",phone:"45"},{code:"DM",label:"Dominica",phone:"1-767"},{code:"DO",label:"Dominican Republic",phone:"1-809"},{code:"DZ",label:"Algeria",phone:"213"},{code:"EC",label:"Ecuador",phone:"593"},{code:"EE",label:"Estonia",phone:"372"},{code:"EG",label:"Egypt",phone:"20"},{code:"EH",label:"Western Sahara",phone:"212"},{code:"ER",label:"Eritrea",phone:"291"},{code:"ES",label:"Spain",phone:"34"},{code:"ET",label:"Ethiopia",phone:"251"},{code:"FI",label:"Finland",phone:"358"},{code:"FJ",label:"Fiji",phone:"679"},{code:"FK",label:"Falkland Islands (Malvinas)",phone:"500"},{code:"FM",label:"Micronesia, Federated States of",phone:"691"},{code:"FO",label:"Faroe Islands",phone:"298"},{code:"FR",label:"France",phone:"33",suggested:!0},{code:"GA",label:"Gabon",phone:"241"},{code:"GB",label:"United Kingdom",phone:"44"},{code:"GD",label:"Grenada",phone:"1-473"},{code:"GE",label:"Georgia",phone:"995"},{code:"GF",label:"French Guiana",phone:"594"},{code:"GG",label:"Guernsey",phone:"44"},{code:"GH",label:"Ghana",phone:"233"},{code:"GI",label:"Gibraltar",phone:"350"},{code:"GL",label:"Greenland",phone:"299"},{code:"GM",label:"Gambia",phone:"220"},{code:"GN",label:"Guinea",phone:"224"},{code:"GP",label:"Guadeloupe",phone:"590"},{code:"GQ",label:"Equatorial Guinea",phone:"240"},{code:"GR",label:"Greece",phone:"30"},{code:"GS",label:"South Georgia and the South Sandwich Islands",phone:"500"},{code:"GT",label:"Guatemala",phone:"502"},{code:"GU",label:"Guam",phone:"1-671"},{code:"GW",label:"Guinea-Bissau",phone:"245"},{code:"GY",label:"Guyana",phone:"592"},{code:"HK",label:"Hong Kong",phone:"852"},{code:"HM",label:"Heard Island and McDonald Islands",phone:"672"},{code:"HN",label:"Honduras",phone:"504"},{code:"HR",label:"Croatia",phone:"385"},{code:"HT",label:"Haiti",phone:"509"},{code:"HU",label:"Hungary",phone:"36"},{code:"ID",label:"Indonesia",phone:"62"},{code:"IE",label:"Ireland",phone:"353"},{code:"IL",label:"Israel",phone:"972"},{code:"IM",label:"Isle of Man",phone:"44"},{code:"IN",label:"India",phone:"91"},{code:"IO",label:"British Indian Ocean Territory",phone:"246"},{code:"IQ",label:"Iraq",phone:"964"},{code:"IR",label:"Iran, Islamic Republic of",phone:"98"},{code:"IS",label:"Iceland",phone:"354"},{code:"IT",label:"Italy",phone:"39"},{code:"JE",label:"Jersey",phone:"44"},{code:"JM",label:"Jamaica",phone:"1-876"},{code:"JO",label:"Jordan",phone:"962"},{code:"JP",label:"Japan",phone:"81",suggested:!0},{code:"KE",label:"Kenya",phone:"254"},{code:"KG",label:"Kyrgyzstan",phone:"996"},{code:"KH",label:"Cambodia",phone:"855"},{code:"KI",label:"Kiribati",phone:"686"},{code:"KM",label:"Comoros",phone:"269"},{code:"KN",label:"Saint Kitts and Nevis",phone:"1-869"},{code:"KP",label:"Korea, Democratic People's Republic of",phone:"850"},{code:"KR",label:"Korea, Republic of",phone:"82"},{code:"KW",label:"Kuwait",phone:"965"},{code:"KY",label:"Cayman Islands",phone:"1-345"},{code:"KZ",label:"Kazakhstan",phone:"7"},{code:"LA",label:"Lao People's Democratic Republic",phone:"856"},{code:"LB",label:"Lebanon",phone:"961"},{code:"LC",label:"Saint Lucia",phone:"1-758"},{code:"LI",label:"Liechtenstein",phone:"423"},{code:"LK",label:"Sri Lanka",phone:"94"},{code:"LR",label:"Liberia",phone:"231"},{code:"LS",label:"Lesotho",phone:"266"},{code:"LT",label:"Lithuania",phone:"370"},{code:"LU",label:"Luxembourg",phone:"352"},{code:"LV",label:"Latvia",phone:"371"},{code:"LY",label:"Libya",phone:"218"},{code:"MA",label:"Morocco",phone:"212"},{code:"MC",label:"Monaco",phone:"377"},{code:"MD",label:"Moldova, Republic of",phone:"373"},{code:"ME",label:"Montenegro",phone:"382"},{code:"MF",label:"Saint Martin (French part)",phone:"590"},{code:"MG",label:"Madagascar",phone:"261"},{code:"MH",label:"Marshall Islands",phone:"692"},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",phone:"389"},{code:"ML",label:"Mali",phone:"223"},{code:"MM",label:"Myanmar",phone:"95"},{code:"MN",label:"Mongolia",phone:"976"},{code:"MO",label:"Macao",phone:"853"},{code:"MP",label:"Northern Mariana Islands",phone:"1-670"},{code:"MQ",label:"Martinique",phone:"596"},{code:"MR",label:"Mauritania",phone:"222"},{code:"MS",label:"Montserrat",phone:"1-664"},{code:"MT",label:"Malta",phone:"356"},{code:"MU",label:"Mauritius",phone:"230"},{code:"MV",label:"Maldives",phone:"960"},{code:"MW",label:"Malawi",phone:"265"},{code:"MX",label:"Mexico",phone:"52"},{code:"MY",label:"Malaysia",phone:"60"},{code:"MZ",label:"Mozambique",phone:"258"},{code:"NA",label:"Namibia",phone:"264"},{code:"NC",label:"New Caledonia",phone:"687"},{code:"NE",label:"Niger",phone:"227"},{code:"NF",label:"Norfolk Island",phone:"672"},{code:"NG",label:"Nigeria",phone:"234"},{code:"NI",label:"Nicaragua",phone:"505"},{code:"NL",label:"Netherlands",phone:"31"},{code:"NO",label:"Norway",phone:"47"},{code:"NP",label:"Nepal",phone:"977"},{code:"NR",label:"Nauru",phone:"674"},{code:"NU",label:"Niue",phone:"683"},{code:"NZ",label:"New Zealand",phone:"64"},{code:"OM",label:"Oman",phone:"968"},{code:"PA",label:"Panama",phone:"507"},{code:"PE",label:"Peru",phone:"51"},{code:"PF",label:"French Polynesia",phone:"689"},{code:"PG",label:"Papua New Guinea",phone:"675"},{code:"PH",label:"Philippines",phone:"63"},{code:"PK",label:"Pakistan",phone:"92"},{code:"PL",label:"Poland",phone:"48"},{code:"PM",label:"Saint Pierre and Miquelon",phone:"508"},{code:"PN",label:"Pitcairn",phone:"870"},{code:"PR",label:"Puerto Rico",phone:"1"},{code:"PS",label:"Palestine, State of",phone:"970"},{code:"PT",label:"Portugal",phone:"351"},{code:"PW",label:"Palau",phone:"680"},{code:"PY",label:"Paraguay",phone:"595"},{code:"QA",label:"Qatar",phone:"974"},{code:"RE",label:"Reunion",phone:"262"},{code:"RO",label:"Romania",phone:"40"},{code:"RS",label:"Serbia",phone:"381"},{code:"RU",label:"Russian Federation",phone:"7"},{code:"RW",label:"Rwanda",phone:"250"},{code:"SA",label:"Saudi Arabia",phone:"966"},{code:"SB",label:"Solomon Islands",phone:"677"},{code:"SC",label:"Seychelles",phone:"248"},{code:"SD",label:"Sudan",phone:"249"},{code:"SE",label:"Sweden",phone:"46"},{code:"SG",label:"Singapore",phone:"65"},{code:"SH",label:"Saint Helena",phone:"290"},{code:"SI",label:"Slovenia",phone:"386"},{code:"SJ",label:"Svalbard and Jan Mayen",phone:"47"},{code:"SK",label:"Slovakia",phone:"421"},{code:"SL",label:"Sierra Leone",phone:"232"},{code:"SM",label:"San Marino",phone:"378"},{code:"SN",label:"Senegal",phone:"221"},{code:"SO",label:"Somalia",phone:"252"},{code:"SR",label:"Suriname",phone:"597"},{code:"SS",label:"South Sudan",phone:"211"},{code:"ST",label:"Sao Tome and Principe",phone:"239"},{code:"SV",label:"El Salvador",phone:"503"},{code:"SX",label:"Sint Maarten (Dutch part)",phone:"1-721"},{code:"SY",label:"Syrian Arab Republic",phone:"963"},{code:"SZ",label:"Swaziland",phone:"268"},{code:"TC",label:"Turks and Caicos Islands",phone:"1-649"},{code:"TD",label:"Chad",phone:"235"},{code:"TF",label:"French Southern Territories",phone:"262"},{code:"TG",label:"Togo",phone:"228"},{code:"TH",label:"Thailand",phone:"66"},{code:"TJ",label:"Tajikistan",phone:"992"},{code:"TK",label:"Tokelau",phone:"690"},{code:"TL",label:"Timor-Leste",phone:"670"},{code:"TM",label:"Turkmenistan",phone:"993"},{code:"TN",label:"Tunisia",phone:"216"},{code:"TO",label:"Tonga",phone:"676"},{code:"TR",label:"Turkey",phone:"90"},{code:"TT",label:"Trinidad and Tobago",phone:"1-868"},{code:"TV",label:"Tuvalu",phone:"688"},{code:"TW",label:"Taiwan, Province of China",phone:"886"},{code:"TZ",label:"United Republic of Tanzania",phone:"255"},{code:"UA",label:"Ukraine",phone:"380"},{code:"UG",label:"Uganda",phone:"256"},{code:"US",label:"United States",phone:"1",suggested:!0},{code:"UY",label:"Uruguay",phone:"598"},{code:"UZ",label:"Uzbekistan",phone:"998"},{code:"VA",label:"Holy See (Vatican City State)",phone:"379"},{code:"VC",label:"Saint Vincent and the Grenadines",phone:"1-784"},{code:"VE",label:"Venezuela",phone:"58"},{code:"VG",label:"British Virgin Islands",phone:"1-284"},{code:"VI",label:"US Virgin Islands",phone:"1-340"},{code:"VN",label:"Vietnam",phone:"84"},{code:"VU",label:"Vanuatu",phone:"678"},{code:"WF",label:"Wallis and Futuna",phone:"681"},{code:"WS",label:"Samoa",phone:"685"},{code:"XK",label:"Kosovo",phone:"383"},{code:"YE",label:"Yemen",phone:"967"},{code:"YT",label:"Mayotte",phone:"262"},{code:"ZA",label:"South Africa",phone:"27"},{code:"ZM",label:"Zambia",phone:"260"},{code:"ZW",label:"Zimbabwe",phone:"263"}];n(135);function z(e){var t=e.content,n=e.onStore,i=e.onValidate,o=Object(R.a)().t,r=Object(a.useRef)(null),c=Object(a.useState)({value:null}),s=Object(p.a)(c,2),l=s[0],u=s[1];Object(a.useEffect)((function(){return function(){var e;n({view:t,response:(null===(e=r.current)||void 0===e?void 0:e.code)||r.current})}}),[]);var d=function(e,t){r.current=t,u(Object(m.a)(Object(m.a)({},l),{},{value:t}));var n=(null===t||void 0===t?void 0:t.code)||r.current;console.log(n),i(void 0!==n&&n.length>0)},b=function(){return Object(P.jsx)(M.a,{id:"country-select",options:_,autoHighlight:!0,onChange:function(e,t){return d(0,t)},value:l.value,getOptionLabel:function(e){return e.label},noOptionsText:o("text.no_options"),renderOption:function(e){return Object(P.jsxs)(a.Fragment,{children:[Object(P.jsx)("span",{children:(t=e.code,"undefined"!==typeof String.fromCodePoint?t.toUpperCase().replace(/./g,(function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)})):t)})," ",e.label]});var t},renderInput:function(e){return Object(P.jsx)(E.a,Object(m.a)(Object(m.a)({},e),{},{label:o("text.choose_a_country"),variant:"outlined",inputProps:Object(m.a)(Object(m.a)({},e.inputProps),{},{autoComplete:"new-password"}),className:"country-select"}))}})};return Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(t.text),escapeHtml:!1,className:"markdown-text"})}),!t.instruction&&Object(P.jsxs)(x.a,{item:!0,children:["countries"===t.autoComplete&&Object(P.jsx)(b,{}),!t.autoComplete&&Object(P.jsx)(E.a,{label:o(t.placeholder),variant:"filled",fullWidth:!0,onChange:function(e){return d(0,e.target.value)}})]})]})}function G(e){var t,n=e.content,i=e.onStore,o=e.onValidate,r=Object(R.a)().t,c=new URLSearchParams(Object(b.f)().search),s=Object(a.useRef)(null),l=Object(a.useState)({value:null}),u=Object(p.a)(l,2),d=u[0],j=u[1];Object(a.useEffect)((function(){return function(){var e;i({view:n,response:(null===(e=s.current)||void 0===e?void 0:e.code)||s.current})}}),[s]);var h,f=null;!0===(null===n||void 0===n?void 0:n.getUrlContent)?null!==(null===n||void 0===n?void 0:n.paramNameAsContent)&&(null===(h=n.paramNameAsContent)||void 0===h?void 0:h.length)>0&&(console.log(null===n||void 0===n?void 0:n.paramNameAsContent),f=c.get(n.paramNameAsContent),console.log(f)):null!==(null===n||void 0===n?void 0:n.content)&&(null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.length)>0&&(f=n.content);if(!(null==d.value&&null!==f&&f.length>0))return Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:r(n.text),escapeHtml:!1,className:"markdown-text"})}),!n.instruction&&Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(E.a,{label:r(n.placeholder),defaultValue:null!=f?f:void 0,variant:"filled",fullWidth:!0,onChange:function(e){return function(e,t){s.current=t,j(Object(m.a)(Object(m.a)({},d),{},{value:t}));var n=(null===t||void 0===t?void 0:t.code)||s.current;console.log(n),o(void 0!==n&&n.length>0)}(0,e.target.value)}})})]});j({value:f})}var W=n(336),B=n(379),H=n(337),K=n(372),V=n(380),U=n(338);function Y(e){var t=e.children,n=e.open,a=e.value;return Object(P.jsx)(W.a,{open:n,enterTouchDelay:0,placement:"top",title:a,arrow:!0,children:t})}function J(e){var t=e.content,n=e.onStore,i=e.onValidate,o=Object(R.a)().t,r=t.questions,c=t.choices,s=t.direction,l=t.text,u=t.slider,d=t.showMidMark,b=Object(a.useRef)({values:Array.from({length:r.length})});Object(a.useEffect)((function(){return t.requiredQuestions.length>0&&i(!1),window.scrollTo({top:0,behavior:"smooth"}),function(){n({view:t,response:b.current})}}),[]);var j=function(e,t){return Object(P.jsxs)(x.a,{item:!0,container:!0,xs:!0,className:"matrix-slider",children:[Object(P.jsx)(B.a,{defaultValue:b.current.values[t],value:b.current.values[t],valueLabelFormat:function(t){return o(e[t-1])},"aria-labelledby":"question"+t,ValueLabelComponent:Y,onChangeCommitted:function(e,n){return m(e,t,n)},step:1,min:1,max:e.length,valueLabelDisplay:"on"}),Object(P.jsxs)(x.a,{container:!0,direction:"row",alignItems:"stretch",justify:"space-between",children:[Object(P.jsx)(x.a,{item:!0,className:"mark",children:Object(P.jsx)("em",{children:o(e[0])})}),d&&Object(P.jsx)(x.a,{item:!0,className:"mark",children:Object(P.jsx)("em",{children:o(e[Math.floor(e.length/2)])})}),Object(P.jsx)(x.a,{item:!0,className:"mark",children:Object(P.jsx)("em",{children:o(e[e.length-1])})})]})]},t)},m=function(e,n,a){b.current.values[n]=e.target.value||a,console.log(b.current.values[n]);var o=b.current.values.filter((function(e,n){return t.requiredQuestions.includes(n)&&(null===e||void 0===e)})).length;i(0===o)},p=function(e,t){return Object(P.jsxs)(x.a,{item:!0,className:"matrix-question-container",children:[Object(P.jsx)(L.a,{source:o(e),escapeHtml:!1,className:"markdown-text"}),u&&j(c,t),!u&&Object(P.jsx)(V.a,{name:"q".concat(t),value:b.current.values[t],onChange:function(e){return m(e,t)},children:Object(P.jsx)(x.a,{container:!0,direction:"vertical"===s?"column":"row",alignItems:"flex-start",justify:"space-between",children:c.map((function(e,t){return function(e,t){return Object(P.jsx)(x.a,{item:!0,xs:!0,children:Object(P.jsx)(H.a,{control:Object(P.jsx)(K.a,{}),value:e,label:o(e),labelPlacement:"vertical"===s?"end":"bottom"})},t)}(e,t)}))})})]},t)};return Object(P.jsxs)(x.a,{container:!0,direction:"column",alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[l&&Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(l),escapeHtml:!1,className:"markdown-text"})}),r.map((function(e,t){return p(e,t)})).reduce((function(e,t){return[e,Object(P.jsx)(U.a,{className:"matrix-spacer"},Math.random().toString()),t]}))]})}var q=n(68),Z=n.n(q);function Q(e){var t=e.submission,n=e.studyId,i=e.submissionNote,o=Object(R.a)().t,r="https://server.cut.social/api/v1/".concat(n,"/responses"),c=Object(a.useState)({submissionCode:void 0,debug:!1}),s=Object(p.a)(c,2),l=s[0],u=s[1];function d(e){var t;return!(!e||"prolific ID"!==(null===e||void 0===e||null===(t=e.view)||void 0===t?void 0:t.id))}return Object(a.useEffect)((function(){if(void 0===l.submissionCode){var e=function(){var e=null,n=t.responses.filter(d);return n.length>0&&(e=n[0].response),e}();Z.a.event({category:"info",action:"submission_insert, pid : "+e,label:"info submission insert"}),fetch(r,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return u(Object(m.a)(Object(m.a)({},l),{},{submissionCode:e.submissionCode}))})).catch((function(n){return Z.a.event({category:"error",action:"submission_insert_error, pid : "+e+"  error:"+n+"  stringify:"+JSON.stringify(n),label:"info submission insert: "+JSON.stringify(t)}),console.error("Error:",n)}))}}),[l]),Object(P.jsxs)(x.a,{container:!0,direction:"column",className:"Text-container",children:[l.submissionCode&&Object(P.jsx)(x.a,{item:!0,xs:!0,className:"submission-container",children:Object(P.jsx)(L.a,{source:o(i,{submissionCode:l.submissionCode}),escapeHtml:!1,className:"markdown-text"})}),l.debug&&Object(P.jsx)(x.a,{item:!0,xs:!0,children:Object(P.jsx)("pre",{children:JSON.stringify(t,null,2)})})]})}var X=n(110),$=n(375),ee=n(339),te=n(340),ne=n(341),ae=n(342);n(277);function ie(e){var t=e.content,n=e.onStore,i=Object(R.a)().t,o=t.reward,r=t.maxPumps,c=t.safePumps,s=t.trials,l=Object(a.useState)({pumps:0,finished:!1,trial:1,totalScore:0,trialResponses:[],dialogIsOpen:!1,taskStartedAt:Date.now(),showTooltip:!0}),u=Object(p.a)(l,2),d=u[0],b=u[1],h=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e};Object(a.useEffect)((function(){return d.randomNumbers=h(Array.from({length:r},(function(e,t){return t+1}))),document.body.style["touch-action"]="none",document.documentElement.style["touch-action"]="none",function(){document.body.style["touch-action"]=null,document.documentElement.style["touch-action"]=null}}),[]),Object(a.useEffect)((function(){if(d.finished&&!d.dialogIsOpen){var e=Date.now(),a={trials:d.trialResponses};a.taskStartedAt=d.taskStartedAt,a.taskFinishedAt=e,a.taskDuration=e-d.taskStartedAt,n({view:t,response:a},!0)}}),[d]);var f=function(e,t){b(Object(m.a)(Object(m.a)({},d),{},{dialogIsOpen:!0,trialResponses:[].concat(Object(j.a)(d.trialResponses),[{trial:d.trial,pumps:d.pumps,score:e?d.pumps*o:0,result:e?"cashed":"exploded"}]),showTooltip:!0,finished:d.trial>=s,pumps:0,trial:d.trial+1,totalScore:d.totalScore+(e?d.pumps*o:0),randomNumbers:h(Array.from({length:r},(function(e,t){return t+1})))}))},O=function(e,t){var n=Math.sqrt(500*(e+1)/Math.PI);return console.log(n),Math.ceil(2*n)};return Object(P.jsxs)(a.Fragment,{children:[d.dialogIsOpen&&Object(P.jsxs)($.a,{open:d.dialogIsOpen,onClose:function(){return b(Object(m.a)(Object(m.a)({},d),{},{dialogIsOpen:!1}))},disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",children:[Object(P.jsx)(ee.a,{id:"dialog-title",children:Object(P.jsx)("b",{children:"cashed"===d.trialResponses[d.trialResponses.length-1].result?i("bart.cashed_title"):i("bart.exploded_title")})}),Object(P.jsx)(te.a,{children:Object(P.jsxs)(ne.a,{children:[i("bart.trial_score_report",{score:d.trialResponses[d.trialResponses.length-1].score}),i("bart.total_score_report",{score:d.trialResponses.map((function(e){return e.score})).reduce((function(e,t){return e+t}),0)})]})}),Object(P.jsx)(ae.a,{children:Object(P.jsx)(T.a,{onClick:function(){return b(Object(m.a)(Object(m.a)({},d),{},{dialogIsOpen:!1}))},color:"primary",autoFocus:!0,size:"large",children:d.trial<=s?i("bart.next_trial"):i("next")})})]}),Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,justify:"space-between",alignItems:"stretch",className:"bart-container",children:[Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[d.trial<=s&&Object(P.jsx)(x.a,{item:!0,children:Object(P.jsxs)(x.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[i("bart.next_reward"),Object(P.jsx)(X.a,{variant:"h4",children:d.pumps*o})]})}),d.trial<=s&&Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:Object(P.jsx)(X.a,{color:"textSecondary",variant:"caption",children:i("bart.trial_label",{trial:d.trial,trials:s})})})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsxs)(x.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[i("bart.total_points"),Object(P.jsx)(X.a,{variant:"h4",children:d.totalScore})]})})]}),Object(P.jsx)(x.a,{item:!0,container:!0,direction:"column",alignContent:"center",alignItems:"center",children:Object(P.jsx)(W.a,{title:i("bart.balloon_tooltip"),arrow:!0,open:!d.dialogIsOpen&&d.showTooltip,children:Object(P.jsx)("div",{className:"bubble-container",style:{cursor:"pointer",width:O(d.pumps),height:O(d.pumps),transition:0===d.pumps?"":"width 1s, height 1s"},onClick:function(){var e=c>0&&d.pumps<c,t=Math.floor(Math.random()*d.randomNumbers.length),n=d.randomNumbers.splice(t,e?0:1);console.log("random number: ",n[0],"(must be 1 to explode)"),1===n[0]?f(!1):b(Object(m.a)(Object(m.a)({},d),{},{showTooltip:!1,pumps:d.pumps+1}))},children:Object(P.jsx)("figure",{className:"bubble"})})})}),Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:Object(P.jsx)(T.a,{size:"large",color:"primary",variant:"outlined",onClick:function(){f(!0)},children:i("bart.cash")})})]})]})}var oe,re=n(343),ce=n(344),se=n(345),le=n(346),ue=n(347),de=function(e){return e[Math.floor(Math.random()*e.length)]},be=function(e){for(var t=e.slice(),n=e.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),i=[t[a],t[n]];t[n]=i[0],t[a]=i[1]}return t};n(278);function je(e){var t=e.content,n=e.onStore,i=e.onProgress,o=Object(R.a)().t,r=t.text,c=t.trials,s=t.stimuliDuration,l=t.fixationDuration,u=t.choices,d=t.timeoutsBeforeReset,b=t.feedbackDuration,h=Object(a.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0}),f=Object(p.a)(h,2),O=f[0],g=f[1],v=function(e){var t=e.key,n=e.keyCode;if(null!==O.trial||32!==n&&" "!==t){if("stimuli"===O.step&&["ArrowLeft","ArrowRight"].includes(t)){var a,i=O.stimuli[O.trial-1],o="ArrowLeft"===t&&i.startsWith("right")||"ArrowRight"===t&&i.startsWith("left");a="ArrowLeft"===t&&"left-go"===i||"ArrowRight"===t&&"right-go"===i?u.go:o?"empty":u.nogo,k(a)}}else S()};Object(a.useEffect)((function(){return window.addEventListener("keydown",v),function(){window.removeEventListener("keydown",v)}}),[v]),Object(a.useEffect)((function(){if(null===O.stimuli){var e=Object(j.a)(Array(c.total).keys()).map((function(e,t){return e<c.leftGo?"left-go":e<c.go?"right-go":e<c.go+(c.left-c.leftGo)?"left-nogo":"right-nogo"}));g(Object(m.a)(Object(m.a)({},O),{},{stimuli:be(e)}))}if("fixation"===O.step&&(clearTimeout(oe),oe=setTimeout((function(){g(Object(m.a)(Object(m.a)({},O),{},{trial:O.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))}),l)),"feedback"===O.step&&(clearTimeout(oe),oe=setTimeout((function(){g(Object(m.a)(Object(m.a)({},O),{},{step:"fixation"}))}),b)),"stimuli"===O.step&&(clearTimeout(oe),O.timeouts<d?oe=setTimeout((function(){g(Object(m.a)(Object(m.a)({},O),{},{trialResponses:[].concat(Object(j.a)(O.trialResponses),[{trial:O.trial,stimuli:O.stimuli[O.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:O.trialStartedAt,rt:null}]),timeouts:O.timeouts+1,correct:!1,step:b>0?"feedback":"fixation"}))}),s):g(Object(m.a)(Object(m.a)({},O),{},{step:"reset",timeouts:0}))),i(100*O.trial/c.total),O.trial>c.total&&(console.log("------------ FINISHED -------"),i(100),g(Object(m.a)(Object(m.a)({},O),{},{finished:!0,taskFinishedAt:Date.now()}))),O.finished){clearTimeout(oe);var a={trials:O.trialResponses};a.taskStartedAt=O.taskStartedAt,a.taskFinishedAt=O.taskFinishedAt,a.taskDuration=O.taskFinishedAt-O.taskStartedAt,n({view:t,response:a},!0)}}),[O]);var y,S=function(){g(Object(m.a)(Object(m.a)({},O),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},k=function(e){var t=Date.now();clearTimeout(oe);var n=e===u.go&&!O.stimuli[O.trial-1].endsWith("nogo")||"empty"===e&&O.stimuli[O.trial-1].endsWith("nogo");g(Object(m.a)(Object(m.a)({},O),{},{correct:n,respondedAt:t,trialResponses:[].concat(Object(j.a)(O.trialResponses),[{trial:O.trial,stimuli:O.stimuli[O.trial-1],choice:e,correct:n,respondedAt:t,trialStartedAt:O.trialStartedAt,rt:t-O.trialStartedAt}]),step:b>0?"feedback":"fixation"}))},w=function(e){return Object(P.jsxs)(a.Fragment,{children:["star"===e&&Object(P.jsx)("div",{onClick:function(){return k("star")},className:"gng-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"yellow"})}),"empty"===e&&Object(P.jsx)("div",{onClick:function(){return k("empty")},className:"gng-stimulus",children:" "}),"circle"===e&&Object(P.jsx)("div",{onClick:function(){return k("circle")},className:"gng-stimulus",children:Object(P.jsx)(ce.a,{fontSize:"large",className:"blue"})}),"blue-star"===e&&Object(P.jsx)("div",{onClick:function(){return k("blue-star")},className:"gng-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"blue"})}),"yellow-circle"===e&&Object(P.jsx)("div",{onClick:function(){return k("yellow-circle")},className:"gng-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"yellow"})})]})};return"reset"===O.step?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("gonogo.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:function(){return S()},children:o("gonogo.restart")})})]}):null===O.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("gonogo.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return S()},children:o("gonogo.start")})})]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"gonogo-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(r),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===O.step&&(y=O.stimuli[O.trial-1],Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:["left-go"===y&&w(u.go),"left-nogo"===y&&w(u.nogo),"left-go"!==y&&"left-nogo"!==y&&w("empty"),Object(P.jsx)(U.a,{orientation:"vertical",flexItem:!0}),"right-go"===y&&w(u.go),"right-nogo"===y&&w(u.nogo),"right-go"!==y&&"right-nogo"!==y&&w("empty")]})),"feedback"===O.step&&Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[O.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct gng-icon"}),!O.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect gng-icon"})]}),"fixation"===O.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"fixation gng-icon"})})]})}var me,pe=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e};n(279),n(285);function he(e){var t=e.content,n=e.onStore,i=t.rule,o=t.colors,r=t.words,c=t.trials,s=t.randomizeTrials,l=t.randomizeChoices,u=t.stimulusDuration,d=t.fixationDuration,b=t.timeoutsBeforeReset,h=t.feedbackDuration,f=Object(R.a)().t,O=Object(a.useState)({trialResponses:[],finished:!1,trial:null,step:null,correct:null,timeouts:0,stimuli:null}),g=Object(p.a)(O,2),v=g[0],y=g[1],S=function(e){var t=e.key,n=e.keyCode;if(null!==v.trial||32!==n&&" "!==t){if("stimulus"===v.step&&["ArrowLeft","ArrowRight"].includes(t)){var a=v.stimuli[v.trial-1].choices,i=v.stimuli[v.trial-1].stimulus,o="ArrowLeft"===t?a[0]:a[1];C(o,i)}}else N()};Object(a.useEffect)((function(){return window.addEventListener("keydown",S),function(){window.removeEventListener("keydown",S)}}),[S]);var k=function(e){var t=s?pe(e):e;return l&&(t=t.map((function(e){var t=Object.assign({},e);return t.choices=pe(e.choices),t}))),t};Object(a.useEffect)((function(){if(null===v.stimuli&&y(Object(m.a)(Object(m.a)({},v),{},{stimuli:k(c)})),"fixation"===v.step&&(clearTimeout(me),me=setTimeout((function(){y(Object(m.a)(Object(m.a)({},v),{},{step:"stimulus",trial:v.trial+1,trialStartedAt:Date.now()}))}),d)),"feedback"===v.step&&(clearTimeout(me),me=setTimeout((function(){y(Object(m.a)(Object(m.a)({},v),{},{step:"fixation"}))}),h)),"stimulus"===v.step&&(clearTimeout(me),v.timeouts<b?me=setTimeout((function(){y(Object(m.a)(Object(m.a)({},v),{},{step:h>0?"feedback":"fixation",trialResponses:[].concat(Object(j.a)(v.trialResponses),[{trial:v.trial,stimulus:v.stimuli[v.trial-1].stimulus,choice:null,correct:null,respondedAt:null,trialStartedAt:v.trialStartedAt,rt:null}]),timeouts:v.timeouts+1,correct:!1}))}),u):y(Object(m.a)(Object(m.a)({},v),{},{step:"reset",timeouts:0}))),v.trial>c.length&&y(Object(m.a)(Object(m.a)({},v),{},{finished:!0,taskFinishedAt:Date.now()})),v.finished){clearTimeout(me);var e={trials:v.trialResponses};e.taskStartedAt=v.taskStartedAt,e.taskFinishedAt=v.taskFinishedAt,e.taskDuration=v.taskFinishedAt-v.taskStartedAt,n({view:t,response:e},!0)}}),[v]);var w,A,N=function(){y(Object(m.a)(Object(m.a)({},v),{},{trial:0,timeouts:0,trialResponses:[],step:"fixation",taskStartedAt:Date.now()}))},C=function(e,t){var n=Date.now();clearTimeout(me);var a=e.split(""),i=Object(p.a)(a,2),o=i[0],r=(i[1],t.split("")),c=Object(p.a)(r,2),s=(c[0],o===c[1]);y(Object(m.a)(Object(m.a)({},v),{},{step:h>0?"feedback":"fixation",correct:s,trialResponses:[].concat(Object(j.a)(v.trialResponses),[{trial:v.trial,stimulus:v.stimuli[v.trial-1].stimulus,choice:e,correct:s,respondedAt:n,trialStartedAt:v.trialStartedAt,rt:n-v.trialStartedAt}])}))};return"reset"===v.step?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justify:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:f("stroop.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:function(){return N()},children:f("stroop.restart")})})]}):null===v.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:f("stroop.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return N()},children:f("stroop.start")})})]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justify:"flex-start",className:"stroop-container stroop-board",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:f(i),escapeHtml:!1,className:"markdown-text"})}),v.trial<=c.length&&"stimulus"===v.step&&function(e){var t=e.split(""),n=Object(p.a)(t,2),a=n[0],i=n[1];return Object(P.jsx)(x.a,{container:!0,item:!0,direction:"column",alignItems:"center",justify:"flex-start",children:Object(P.jsx)(X.a,{className:"stroop-stimulus",variant:"h1",style:{color:o[i]},children:f(r[a])})})}(v.stimuli[v.trial-1].stimulus),v.trial<=c.length&&"stimulus"===v.step&&(w=v.stimuli[v.trial-1].choices,A=v.stimuli[v.trial-1].stimulus,Object(P.jsx)(x.a,{container:!0,direction:"row",justify:"space-between",spacing:2,alignItems:"stretch",className:"stroop-choices",children:w.map((function(e,t){var n=e.split(""),a=Object(p.a)(n,2),i=a[0],c=a[1];return Object(P.jsx)(x.a,{item:!0,xs:!0,children:Object(P.jsx)(T.a,{style:{color:o[c]},onClick:function(){return C(e,A)},size:"large",fullWidth:!0,variant:"outlined",children:f(r[i])})},t)}))})),"feedback"===v.step&&(v.correct,Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[v.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct gng-icon"}),!v.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect gng-icon"})]})),"fixation"===v.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"fixation gng-icon"})})]})}var fe=n(353),Oe=n(89),ge=n(90),xe=n(369),ve=n(370),ye=n(352),Se=n(148),ke=n.n(Se),we=n(93),Ae=n(349),Ne=n(350),Ce=n(348),Ie=n(381),Te={OPPONENT:"opponent",POT:"pot",PLAYER:"player"},Re=Object(Ce.a)((function(e){return{root:{flexGrow:0},paper:{padding:e.spacing(2)},medium:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(4),height:e.spacing(4)},grey:{color:e.palette.getContrastText(we.a[400]),backgroundColor:we.a[400]},tealDark:{color:e.palette.getContrastText(Ae.a[800]),backgroundColor:Ae.a[800]},blueG:{color:e.palette.getContrastText(Ne.a[800]),backgroundColor:Ne.a[800]},height100:{height:"100%"}}})),Pe=void 0,De=void 0,Ee=Object(a.memo)((function(e){var t=e.name,n=e.amount,a=e.onDrop,i=e.accept,o=e.person,r=e.personsPrefix,c=Object(b.g)().lang;Pe=c,De=r,console.log(De);var s=Object(R.a)().t,u="rtl"===l[Pe].direction?I:C,d=Re(u),j=Object(xe.a)({accept:i,drop:a,collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),h=Object(p.a)(j,2),f=h[0],O=f.canDrop,g=f.isOver,v=h[1],S="#222";O&&g?S="darkgreen":O&&(S=Ne.a[800]);for(var k=[],w=0;w<n;w++)k.push(Object(P.jsx)(Le,{type:t,name:t+w.toString(),boxName:t},t+w.toString()));return Object(P.jsx)(x.a,{item:!0,xs:12,children:Object(P.jsx)(y.a,{ref:v,className:d.paper,style:Object(m.a)(Object(m.a)({},{height:"128px"}),{},{backgroundColor:S}),elevation:3,children:Object(P.jsxs)(x.a,{container:!0,alignItems:"center",direction:"row",className:d.height100,children:[Object(P.jsxs)(x.a,{item:!0,xs:4,children:[t===Te.OPPONENT&&Object(P.jsx)(Fe,{person:o}),t!==Te.OPPONENT&&Object(P.jsx)(X.a,{children:s("dictator."+t)})]}),Object(P.jsx)(x.a,{item:!0,xs:7,children:Object(P.jsx)(x.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:k})}),Object(P.jsx)(x.a,{item:!0,xs:1,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(P.jsx)(Ie.a,{className:"".concat(d.grey," ").concat(d.large),children:n})})})]})})})}));function Me(e,t){return console.log(De),De+t+"."+e}var Fe=Object(a.memo)((function(e){var t=e.person,n=Object(R.a)().t,a="rtl"===l[Pe].direction?I:C,i=Re(a);return Object(P.jsxs)(P.Fragment,{children:[(null===t||void 0===t?void 0:t.avatar)&&Object(P.jsx)(Ie.a,{alt:n(Me(t.field1,t.id)),src:"/images/"+t.avatar,className:i.large}),!(null!==t&&void 0!==t&&t.avatar)&&Object(P.jsx)(Ie.a,{className:i.large}),Object(P.jsx)(X.a,{variant:"body1",color:"textPrimary",component:"p",children:(null===t||void 0===t?void 0:t.field1)&&n(Me(t.field1,t.id))}),Object(P.jsx)(X.a,{variant:"body2",color:"textSecondary",component:"p",children:(null===t||void 0===t?void 0:t.field2)&&n(Me(t.field2,t.id))}),Object(P.jsx)(X.a,{variant:"body2",color:"textSecondary",component:"p",children:(null===t||void 0===t?void 0:t.field3)&&n(Me(t.field3,t.id))})]})})),Le=Object(a.memo)((function(e){var t=e.type,n=e.name,a=e.boxName,i=Object(ve.a)((function(){return{type:t,item:{name:n,boxName:a},collect:function(e){return{isDragging:!!e.isDragging()}}}}),[n]),o=Object(p.a)(i,3),r=o[0].isDragging,c=o[1],s=o[2];return Object(P.jsxs)(x.a,{item:!0,children:[Object(P.jsx)(ye.a,{connect:s,src:"/images/token-large.png"}),Object(P.jsx)("span",{ref:c,className:"token-span",style:Object(m.a)(Object(m.a)({},{cursor:"move"}),{},{opacity:r?.5:1}),children:Object(P.jsx)(ke.a,{fontSize:r?"large":"medium"})})]})}));n(286);function _e(e){var t=e.content,n=e.onStore,i=e.onNotification,o=Object(R.a)().t,r=t.tokens,c=t.trials,s=t.useOpponentTypes,l=t.opponentTypes,u=t.text,d=t.personsPrefix,b=t.dialogOptionalText,h=t.persons,f=Object(a.useState)({finished:!1,trial:null,totalScore:0,dialogIsOpen:!1,trialResponses:[],taskStartedAt:Date.now()}),O=Object(p.a)(f,2),g=O[0],v=O[1],y=Object(a.useState)([{name:Te.OPPONENT,amount:0,accepts:[Te.POT,Te.PLAYER]},{name:Te.POT,amount:r,accepts:[Te.PLAYER,Te.OPPONENT]},{name:Te.PLAYER,amount:0,accepts:[Te.POT,Te.OPPONENT]}]),S=Object(p.a)(y,2),k=S[0],w=S[1],A=Object(a.useState)(void 0),N=Object(p.a)(A,2),C=N[0],I=N[1];Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){if(g.finished&&!g.dialogIsOpen){var e=Date.now(),a={trials:g.trialResponses};a.taskStartedAt=g.taskStartedAt,a.taskFinishedAt=e,a.taskDuration=e-g.taskStartedAt,n({view:t,response:a},!0)}}),[g,n,t]);var D=function(){var e=!1;return k.forEach((function(t){t.name===Te.POT&&0===t.amount&&(e=!0)})),e},E=Object(a.useCallback)((function(e,t){var n=t.boxName,a=e;w(k.map((function(e){return e.name===n?Object(m.a)(Object(m.a)({},e),{},{amount:e.amount-1}):e.name===a?Object(m.a)(Object(m.a)({},e),{},{amount:e.amount+1}):e})))}),[k]),M=function(){var e;if(!D())return console.log("it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!"),void i(o("ultimatum.errors.required"));var t=k.find((function(e){return e.name===Te.PLAYER})).amount,n=!0;(null===(e=C[F])||void 0===e?void 0:e.minAcceptable)>r-t&&(n=!1),v(Object(m.a)(Object(m.a)({},g),{},{trialResponses:[].concat(Object(j.a)(g.trialResponses),[{trial:g.trial,playerShare:t,score:n?t:0,opponentShare:r-t,opponent:C[F],result:n?"accepted":"rejected"}]),finished:g.trial>=c-1,trial:g.trial+1,totalScore:g.totalScore+(n?t:0),dialogIsOpen:!0})),w([{name:Te.OPPONENT,amount:0,accepts:[Te.POT,Te.PLAYER]},{name:Te.POT,amount:r,accepts:[Te.PLAYER,Te.OPPONENT]},{name:Te.PLAYER,amount:0,accepts:[Te.POT,Te.OPPONENT]}])};if(null===g.trial)return console.log("ultimatum starting..."),void function(){var e=function(e,t){if(!0!==s)return e;var n=e.filter((function(e){return function(e,t){for(var n=!1,a=0;a<e.tags.length;a++)t.inclue(e.tags[a])&&(n=!0);return n}(e,t)}));return n}(h,l);I(be(e)),v(Object(m.a)(Object(m.a)({},g),{},{trial:0,trialResponses:[],taskStartedAt:Date.now()}))}();var F=g.trial;null!==g.trial&&g.trial>=C.length&&(F=g.trial%C.length);var L=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},_=L()?ge.a:Oe.a;return Object(P.jsxs)(a.Fragment,{children:[g.dialogIsOpen&&Object(P.jsxs)($.a,{open:g.dialogIsOpen,onClose:function(){return v(Object(m.a)(Object(m.a)({},g),{},{dialogIsOpen:!1}))},disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",children:[Object(P.jsx)(ee.a,{disableTypography:!0,id:"dialog-title",children:Object(P.jsx)(X.a,{variant:"h6",color:"accepted"===g.trialResponses[g.trialResponses.length-1].result?"primary":"error",children:Object(P.jsx)("b",{children:"accepted"===g.trialResponses[g.trialResponses.length-1].result?o("ultimatum.dialog_title.accepted"):o("ultimatum.dialog_title.rejected")})})}),Object(P.jsx)(te.a,{children:Object(P.jsxs)(ne.a,{children:[o("ultimatum.trial_score_report",{decision:g.trialResponses[g.trialResponses.length-1].result,score:g.trialResponses[g.trialResponses.length-1].score}),o("ultimatum.total_score_report",{score:g.trialResponses.map((function(e){return e.score})).reduce((function(e,t){return e+t}),0)}),Object(P.jsx)("br",{})," ",Object(P.jsx)("br",{}),!g.finished&&b?o(b):o("ultimatum.dialog_optional_text_default")]})}),Object(P.jsx)(ae.a,{children:Object(P.jsx)(T.a,{onClick:function(){return v(Object(m.a)(Object(m.a)({},g),{},{dialogIsOpen:!1}))},color:"primary",autoFocus:!0,size:"large",children:g.trial<=c-1?o("ultimatum.next_trial"):o("next")})})]}),Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ultimatum-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(X.a,{variant:"body2",children:o(u)})}),Object(P.jsx)(x.a,{item:!0,container:!0,spacing:2,alignItems:"stretch",justifyContent:"space-between",className:"boxes-container",children:Object(P.jsx)(fe.a,{backend:_,options:L()?{enableMouseEvents:!0}:{},children:k.map((function(e,t){var n=e.name,a=e.amount,i=e.accepts;return Object(P.jsx)(Ee,{accept:i,name:n,amount:a,onDrop:function(e){return E(n,e)},person:C[F],personsPrefix:d},t)}))})}),Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(X.a,{variant:"body2",children:o("ultimatum.trial_label",{trial:g.trial+1,trials:c})})})}),Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(T.a,{size:"large",color:D()?"primary":"default",variant:D()?"contained":"outlined",onClick:function(){D()?M():i(o("ultimatum.errors.required"))},children:o("ultimatum.finish.button")})})}),Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(X.a,{variant:"body2",children:o("ultimatum.total_points",{score:g.totalScore})})})})]})]})]})}n(287);function ze(e){var t=e.content,n=e.onStore,i=e.onNotification,o=Object(R.a)().t,r=t.tokens,c=t.trials,s=t.useOpponentTypes,l=t.opponentTypes,u=t.text,d=t.personsPrefix,b=t.persons,h=Object(a.useState)({finished:!1,trial:null,totalScore:0,dialogIsOpen:!1,trialResponses:[],taskStartedAt:Date.now()}),f=Object(p.a)(h,2),O=f[0],g=f[1],v=Object(a.useState)([{name:Te.OPPONENT,amount:0,accepts:[Te.POT,Te.PLAYER]},{name:Te.POT,amount:r,accepts:[Te.PLAYER,Te.OPPONENT]},{name:Te.PLAYER,amount:0,accepts:[Te.POT,Te.OPPONENT]}]),y=Object(p.a)(v,2),S=y[0],k=y[1],w=Object(a.useState)(void 0),A=Object(p.a)(w,2),N=A[0],C=A[1];Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){if(O.finished&&!O.dialogIsOpen){var e=Date.now(),a={trials:O.trialResponses};a.taskStartedAt=O.taskStartedAt,a.taskFinishedAt=e,a.taskDuration=e-O.taskStartedAt,n({view:t,response:a},!0)}}),[O,n,t]);var I=function(){var e=!1;return S.forEach((function(t){t.name===Te.POT&&0===t.amount&&(e=!0)})),e},D=Object(a.useCallback)((function(e,t){var n=t.boxName,a=e;k(S.map((function(e){return e.name===n?Object(m.a)(Object(m.a)({},e),{},{amount:e.amount-1}):e.name===a?Object(m.a)(Object(m.a)({},e),{},{amount:e.amount+1}):e})))}),[S]),E=function(){if(!I())return console.log("it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!"),void i(o("dictator.errors.required"));var e=S.find((function(e){return e.name===Te.PLAYER})).amount;g(Object(m.a)(Object(m.a)({},O),{},{trialResponses:[].concat(Object(j.a)(O.trialResponses),[{trial:O.trial,playerShare:e,opponentShare:r-e,opponent:N[M]}]),finished:O.trial>=c-1,trial:O.trial+1,totalScore:O.totalScore+e,dialogIsOpen:!0})),k([{name:Te.OPPONENT,amount:0,accepts:[Te.POT,Te.PLAYER]},{name:Te.POT,amount:r,accepts:[Te.PLAYER,Te.OPPONENT]},{name:Te.PLAYER,amount:0,accepts:[Te.POT,Te.OPPONENT]}])};if(null===O.trial)return console.log("dictator starting..."),void function(){var e=function(e,t){if(!0!==s)return e;var n=e.filter((function(e){return function(e,t){for(var n=!1,a=0;a<e.tags.length;a++)t.inclue(e.tags[a])&&(n=!0);return n}(e,t)}));return n}(b,l);C(be(e)),g(Object(m.a)(Object(m.a)({},O),{},{trial:0,trialResponses:[],taskStartedAt:Date.now()}))}();var M=O.trial;null!==O.trial&&O.trial>=N.length&&(M=O.trial%N.length);var F=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},L=F()?ge.a:Oe.a;return Object(P.jsxs)(a.Fragment,{children:[O.dialogIsOpen&&Object(P.jsxs)($.a,{open:O.dialogIsOpen,onClose:function(){return g(Object(m.a)(Object(m.a)({},O),{},{dialogIsOpen:!1}))},disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",children:[Object(P.jsx)(ee.a,{id:"dialog-title",children:Object(P.jsx)("b",{children:o("dictator.dialog_title")})}),Object(P.jsx)(te.a,{children:Object(P.jsxs)(ne.a,{children:[o("dictator.trial_score_report",{score:O.trialResponses[O.trialResponses.length-1].playerShare}),o("dictator.total_score_report",{score:O.trialResponses.map((function(e){return e.playerShare})).reduce((function(e,t){return e+t}),0)})]})}),Object(P.jsx)(ae.a,{children:Object(P.jsx)(T.a,{onClick:function(){return g(Object(m.a)(Object(m.a)({},O),{},{dialogIsOpen:!1}))},color:"primary",autoFocus:!0,size:"large",children:O.trial<=c-1?o("dictator.next_trial"):o("next")})})]}),Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"dictator-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(X.a,{variant:"body2",children:o(u)})}),Object(P.jsx)(x.a,{item:!0,container:!0,spacing:2,alignItems:"stretch",justifyContent:"space-between",className:"boxes-container",children:Object(P.jsx)(fe.a,{backend:L,options:F()?{enableMouseEvents:!0}:{},children:S.map((function(e,t){var n=e.name,a=e.amount,i=e.accepts;return Object(P.jsx)(Ee,{accept:i,name:n,amount:a,onDrop:function(e){return D(n,e)},person:N[M],personsPrefix:d},t)}))})}),Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(X.a,{variant:"body2",children:o("dictator.trial_label",{trial:O.trial+1,trials:c})})})}),Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(T.a,{size:"large",color:"primary",variant:"outlined",onClick:function(){I()?E():i(o("dictator.errors.required"))},children:o("dictator.finish.button")})})}),Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(x.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(X.a,{variant:"body2",children:o("dictator.total_points",{score:O.totalScore})})})})]})]})]})}var Ge;n(288);function We(e){var t=e.content,n=e.onStore,i=e.onProgress,o=Object(R.a)().t,r=t.text,c=t.trials,s=t.stimuliDuration,l=t.fixationDuration,u=t.timeoutsBeforeReset,d=t.feedbackDuration,b=Object(a.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,type:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0}),h=Object(p.a)(b,2),f=h[0],O=h[1];Object(a.useEffect)((function(){var e=function(e){var t=e.key,n=e.keyCode;if(null!==f.trial||32!==n&&" "!==t){if("stimuli"===f.step&&["ArrowLeft","ArrowRight"].includes(t)){var a,i=f.stimuli[f.trial-1],o="ArrowLeft"===t&&i.startsWith("right")||"ArrowRight"===t&&i.startsWith("left"),r="ArrowLeft"===t&&i.startsWith("left-go")||"ArrowRight"===t&&i.startsWith("right-go");a=i.endsWith("top")?r?c.top.choices.go:o?"empty":c.top.choices.nogo:r?c.bottom.choices.go:o?"empty":c.bottom.choices.nogo,v(a)}}else g()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[f]),Object(a.useEffect)((function(){if(null===f.stimuli){var e=Object(j.a)(Array(c.total).keys()).map((function(e,t){return e<c.top.total?e<c.top.leftGo?"left-go-top":e<c.top.go?"right-go-top":e<c.top.go+(c.top.left-c.top.leftGo)?"left-nogo-top":"right-nogo-top":e<c.top.total+c.bottom.leftGo?"left-go-bottom":e<c.top.total+c.bottom.go?"right-go-bottom":e<c.top.total+c.bottom.go+(c.bottom.left-c.bottom.leftGo)?"left-nogo-bottom":"right-nogo-bottom"}));O(Object(m.a)(Object(m.a)({},f),{},{stimuli:be(e)}))}}),[f]),Object(a.useEffect)((function(){if("fixation"===f.step&&(clearTimeout(Ge),Ge=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{trial:f.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))}),l)),"feedback"===f.step&&(clearTimeout(Ge),Ge=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{step:"fixation"}))}),d)),"stimuli"===f.step&&(clearTimeout(Ge),f.timeouts<u?Ge=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{trialResponses:[].concat(Object(j.a)(f.trialResponses),[{trial:f.trial,stimuli:f.stimuli[f.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:f.trialStartedAt,rt:null}]),timeouts:f.timeouts+1,correct:!1,step:d>0?"feedback":"fixation"}))}),s):O(Object(m.a)(Object(m.a)({},f),{},{step:"reset",timeouts:0}))),i(100*f.trial/c.total),f.trial>c.total&&(console.log("------------ FINISHED -------"),i(100),O(Object(m.a)(Object(m.a)({},f),{},{finished:!0,taskFinishedAt:Date.now()}))),f.finished){clearTimeout(Ge);var e={trials:f.trialResponses};e.taskStartedAt=f.taskStartedAt,e.taskFinishedAt=f.taskFinishedAt,e.taskDuration=f.taskFinishedAt-f.taskStartedAt,n({view:t,response:e},!0)}}),[f]);var g=function(){O(Object(m.a)(Object(m.a)({},f),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},v=function(e){var t=Date.now();clearTimeout(Ge);var n=function(e){var t=e.endsWith("top")?c.top.choices:c.bottom.choices;return e.includes("nogo")?"empty":t.go}(f.stimuli[f.trial-1]);console.log("correct answer = %s for choice %s , in stimuli %o",n,e,f.stimuli[f.trial-1]),O(Object(m.a)(Object(m.a)({},f),{},{correct:n===e,respondedAt:t,trialResponses:[].concat(Object(j.a)(f.trialResponses),[{trial:f.trial,stimuli:f.stimuli[f.trial-1],choice:e,correct:n===e,respondedAt:t,trialStartedAt:f.trialStartedAt,rt:t-f.trialStartedAt}]),step:d>0?"feedback":"fixation"}))};var y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(P.jsxs)(a.Fragment,{children:["empty"===e&&t&&Object(P.jsx)("div",{onClick:function(){return v("empty")},className:"ts-stimulus",children:" "}),"empty"===e&&!t&&Object(P.jsx)("div",{className:"ts-stimulus ts-inactive",children:" "}),"star"===e&&Object(P.jsx)("div",{onClick:function(){return v("star")},className:"ts-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"yellow"})}),"circle"===e&&Object(P.jsx)("div",{onClick:function(){return v("circle")},className:"ts-stimulus",children:Object(P.jsx)(ce.a,{fontSize:"large",className:"blue"})}),"blue-star"===e&&Object(P.jsx)("div",{onClick:function(){return v("blue-star")},className:"ts-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"blue"})}),"yellow-circle"===e&&Object(P.jsx)("div",{onClick:function(){return v("yellow-circle")},className:"ts-stimulus",children:Object(P.jsx)(re.a,{fontSize:"large",className:"yellow"})})]})},S=function(e,t){var n=e.endsWith("top")?c.top.choices:c.bottom.choices;return Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[0===t&&e.endsWith("bottom")&&y("empty",!1),0===t&&e.endsWith("top")&&e.startsWith("left-go")&&y(n.go),0===t&&e.endsWith("top")&&e.startsWith("left-nogo")&&y(n.nogo),0===t&&e.endsWith("top")&&!e.includes("left-go")&&!e.includes("left-nogo")&&y("empty"),1===t&&e.endsWith("top")&&y("empty",!1),1===t&&e.endsWith("bottom")&&e.startsWith("left-go")&&y(n.go),1===t&&e.endsWith("bottom")&&e.startsWith("left-nogo")&&y(n.nogo),1===t&&e.endsWith("bottom")&&!e.startsWith("left-go")&&!e.startsWith("left-nogo")&&y("empty"),Object(P.jsx)(U.a,{orientation:"vertical",flexItem:!0}),0===t&&e.endsWith("bottom")&&y("empty",!1),0===t&&e.endsWith("top")&&e.startsWith("right-go")&&y(n.go),0===t&&e.endsWith("top")&&e.startsWith("right-nogo")&&y(n.nogo),0===t&&e.endsWith("top")&&!e.includes("right-go")&&!e.includes("right-nogo")&&y("empty"),1===t&&e.endsWith("top")&&y("empty",!1),1===t&&e.endsWith("bottom")&&e.startsWith("right-go")&&y(n.go),1===t&&e.endsWith("bottom")&&e.startsWith("right-nogo")&&y(n.nogo),1===t&&e.endsWith("bottom")&&!e.startsWith("right-go")&&!e.startsWith("right-nogo")&&y("empty")]})};return"reset"===f.step?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("taskswitch.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:function(){return g()},children:o("taskswitch.restart")})})]}):null===f.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("taskswitch.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return g()},children:o("taskswitch.start")})})]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(r),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===f.step&&function(e){if(e)return Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-stimulus-container",children:[S(e,0),Object(P.jsxs)(x.a,{item:!0,children:[" ",Object(P.jsx)(U.a,{orientation:"horizontal"})," "]}),S(e,1)]})}(f.stimuli[f.trial-1]),"feedback"===f.step&&Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[f.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct ts-icon"}),!f.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect ts-icon"})]}),"fixation"===f.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"fixation ts-icon"})})]})}var Be;n(289);function He(e){var t=e.content,n=e.onStore,i=e.onProgress,o=Object(R.a)().t,r=t.text,c=t.trials,s=t.stimuliDuration,l=t.fixationDuration,u=t.timeoutsBeforeReset,d=t.feedbackDuration,b=Object(a.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,type:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0}),h=Object(p.a)(b,2),f=h[0],O=h[1];Object(a.useEffect)((function(){console.log("useEffect -> before handleKeyPress, it has no dependency");var e=function(e){var t=e.key,n=e.keyCode;if(null!==f.trial||32!==n&&" "!==t){if("stimuli"===f.step&&["ArrowLeft","ArrowRight"].includes(t)){var a=f.stimuli[f.trial-1],i=void 0;"ArrowLeft"===t&&(i=a.pos>1?2:0),"ArrowRight"===t&&(i=a.pos>1?3:1),v(i)}}else g()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[f]),Object(a.useEffect)((function(){if(console.log(f.stimuli),null===f.stimuli){var e=Object(j.a)(Array(c.total).keys()).map((function(e,t){var n={pos:0,figure:0,color:0};return e<c.typeA?(n.pos=e<c.left?0:1,n.figure=e<c.figureA?0:1,n.color=e<c.colorA?0:1):(n.pos=e-c.typeA<c.left?2:3,n.figure=e-c.typeA<c.figureA?0:1,n.color=e-c.typeA<c.colorA?0:1),n}));O(Object(m.a)(Object(m.a)({},f),{},{stimuli:be(e)}))}}),[f.stimuli]),Object(a.useEffect)((function(){if("fixation"===f.step&&(clearTimeout(Be),Be=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{trial:f.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))}),l)),"feedback"===f.step&&(clearTimeout(Be),Be=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{step:"fixation"}))}),d)),"stimuli"===f.step&&(clearTimeout(Be),f.timeouts<u?Be=setTimeout((function(){O(Object(m.a)(Object(m.a)({},f),{},{trialResponses:[].concat(Object(j.a)(f.trialResponses),[{trial:f.trial,stimuli:f.stimuli[f.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:f.trialStartedAt,rt:null}]),timeouts:f.timeouts+1,correct:!1,step:d>0?"feedback":"fixation"}))}),s):O(Object(m.a)(Object(m.a)({},f),{},{step:"reset",timeouts:0}))),i(100*f.trial/c.total),f.trial>c.total&&(console.log("------------ FINISHED -------"),i(100),O(Object(m.a)(Object(m.a)({},f),{},{finished:!0,taskFinishedAt:Date.now()}))),f.finished){clearTimeout(Be);var e={trials:f.trialResponses};e.taskStartedAt=f.taskStartedAt,e.taskFinishedAt=f.taskFinishedAt,e.taskDuration=f.taskFinishedAt-f.taskStartedAt,n({view:t,response:e},!0)}}),[f]);var g=function(){O(Object(m.a)(Object(m.a)({},f),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},v=function(e){var t=Date.now();clearTimeout(Be);var n=function(e){if(e.pos<2)return 0===e.figure?e.pos:1-e.pos;if(e.pos>1)return 0===e.color?e.pos:2===e.pos?3:2}(f.stimuli[f.trial-1]);console.log("correct answer = %d for choice %d , in stimuli %o",n,e,f.stimuli[f.trial-1]),O(Object(m.a)(Object(m.a)({},f),{},{correct:n===e,respondedAt:t,trialResponses:[].concat(Object(j.a)(f.trialResponses),[{trial:f.trial,stimuli:f.stimuli[f.trial-1],type:f.stimuli[f.trial-1].pos<2?0:1,choice:e,correct:n===e,respondedAt:t,trialStartedAt:f.trialStartedAt,rt:t-f.trialStartedAt}]),step:d>0?"feedback":"fixation"}))};var y,S=function(e,t){return Object(P.jsx)(a.Fragment,{children:Object(P.jsxs)("div",{onClick:function(){return v(t)},className:"ts-stimulus",children:["0-0"===e&&Object(P.jsx)(re.a,{fontSize:"large",className:"yellow"}),"1-0"===e&&Object(P.jsx)(ce.a,{fontSize:"large",className:"yellow"}),"0-1"===e&&Object(P.jsx)(re.a,{fontSize:"large",className:"blue"}),"1-1"===e&&Object(P.jsx)(ce.a,{fontSize:"large",className:"blue"})]})})},k=function(e,t,n,a){return!1===e?Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[S("empty",n),Object(P.jsx)(U.a,{orientation:"vertical",flexItem:!0}),S("empty",a)]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[(null===t||void 0===t?void 0:t.pos)===n&&S(t.figure+"-"+t.color,t.pos),(null===t||void 0===t?void 0:t.pos)===a&&S("empty",n),Object(P.jsx)(U.a,{orientation:"vertical",flexItem:!0}),(null===t||void 0===t?void 0:t.pos)===n&&S("empty",a),(null===t||void 0===t?void 0:t.pos)===a&&S(t.figure+"-"+t.color,t.pos)]})};return"reset"===f.step?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("taskswitch.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:function(){return g()},children:o("taskswitch.restart")})})]}):null===f.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("taskswitch.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return g()},children:o("taskswitch.start")})})]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(r),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===f.step&&(y=f.stimuli[f.trial-1],Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-stimulus-container",children:[(null===y||void 0===y?void 0:y.pos)<2&&k(!0,y,0,1),(null===y||void 0===y?void 0:y.pos)>1&&k(!1),Object(P.jsxs)(x.a,{item:!0,children:[" ",Object(P.jsx)(U.a,{orientation:"horizontal"})," "]}),(null===y||void 0===y?void 0:y.pos)<2&&k(!1),(null===y||void 0===y?void 0:y.pos)>1&&k(!0,y,2,3)]})),"feedback"===f.step&&Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[f.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct ts-icon"}),!f.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect ts-icon"})]}),"fixation"===f.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"fixation ts-icon"})})]})}var Ke,Ve=n(368),Ue=n(354),Ye=n(355),Je=n(356),qe=n(357),Ze=n(358),Qe=n(359),Xe=n(360),$e=n(361);n(290);function et(e){var t=e.content,n=e.onStore,i=e.onNotification,o=e.onProgress,r=Object(R.a)().t,c=t.text,s=t.trials,l=t.stimuliDuration,u=t.fixationDuration,d=t.feedbackDuration,b=t.nback,h=t.stimuli,f={star:re.a,circle:ce.a,triangle:Ue.a,rectangle:Ye.a,hand:Je.a,ball:qe.a,watch:Ze.a,school:Qe.a,cup:Xe.a},O=Object(a.useState)({finished:!1,trial:null,step:null,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,trialStartedAt:null,respondedAt:null,stimuli:null}),g=Object(p.a)(O,2),v=g[0],y=g[1];Object(a.useEffect)((function(){var e=function(e){var t=e.key,n=e.keyCode;if(null!==v.trial||32!==n&&" "!==t){if("stimuli"===v.step&&(32===n||" "===t)){var a=v.stimuli[v.trial-1];k(a)}}else S()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[v]),Object(a.useEffect)((function(){if(null===v.stimuli){var e=0,a=0,i=Object(j.a)(Array(s).keys()).map((function(t,n){var i=h[e];return a<i.amount?(a++,{type:i.type,name:i.name}):(e++,a=1,e>=h.length&&(console.log("error in figure numbers and total trials, reseting figures. Index: %d , length: %d",e,null===h||void 0===h?void 0:h.length),e=0),{type:(i=h[e]).type,name:i.name})}));y(Object(m.a)(Object(m.a)({},v),{},{stimuli:be(i)}))}if(v.trial>s&&(console.log("------------ FINISHED -------"),o(100),y(Object(m.a)(Object(m.a)({},v),{},{finished:!0,taskFinishedAt:Date.now()}))),"fixation"===v.step&&(clearTimeout(Ke),Ke=setTimeout((function(){y(Object(m.a)(Object(m.a)({},v),{},{trial:v.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))}),u)),"feedback"===v.step&&(clearTimeout(Ke),Ke=setTimeout((function(){y(Object(m.a)(Object(m.a)({},v),{},{step:"fixation"}))}),d)),"stimuli"===v.step&&(clearTimeout(Ke),Ke=setTimeout((function(){var e,t,n=Date.now(),a=!(v.trial>b)||(null===(e=v.stimuli[v.trial-1])||void 0===e?void 0:e.name)!==(null===(t=v.stimuli[v.trial-(b+1)])||void 0===t?void 0:t.name);y(Object(m.a)(Object(m.a)({},v),{},{correct:a,respondedAt:n,trialResponses:[].concat(Object(j.a)(v.trialResponses),[{trial:v.trial,stimuli:v.stimuli[v.trial-1],choice:"noresponse",correct:a,respondedAt:n,trialStartedAt:v.trialStartedAt,rt:null}]),step:d>0?"feedback":"fixation"}))}),l)),o(100*v.trial/s),v.finished){clearTimeout(Ke);var r={trials:v.trialResponses};r.taskStartedAt=v.taskStartedAt,r.taskFinishedAt=v.taskFinishedAt,r.taskDuration=v.taskFinishedAt-v.taskStartedAt,n({view:t,response:r},!0)}}),[v]);var S=function(){y(Object(m.a)(Object(m.a)({},v),{},{trialResponses:[],trial:0,step:"fixation",taskStartedAt:Date.now()})),console.log("task started. stimuli: %o",v.stimuli)},k=function(e){var t,n;if(v.trial<=b)return i(r("nback.invalid.selection.notification"));var a=Date.now();clearTimeout(Ke);var o=v.trial>b&&(null===(t=v.stimuli[v.trial-1])||void 0===t?void 0:t.name)===(null===(n=v.stimuli[v.trial-(b+1)])||void 0===n?void 0:n.name);y(Object(m.a)(Object(m.a)({},v),{},{correct:o,respondedAt:a,trialResponses:[].concat(Object(j.a)(v.trialResponses),[{trial:v.trial,stimuli:v.stimuli[v.trial-1],choice:e,correct:o,respondedAt:a,trialStartedAt:v.trialStartedAt,rt:a-v.trialStartedAt}]),step:d>0?"feedback":"fixation"}))};return null===v.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:r("nback.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return S()},children:r("nback.start")})})]}):Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"nback-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:r(c),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",className:"nback-main-container",children:["stimuli"===v.step&&function(e){if(console.log("renderFigure: ",e),null===e||void 0===e)return console.log("figure is null, state:",v),Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"});if("icon"===e.type){if(!f[e.name])return Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(a.Fragment,{children:Object(P.jsx)(Ve.a,{onClick:function(){return k(e)},className:"single-stimulus single-stimulus-icon",children:Object(P.jsx)($e.a,{fontSize:"large",className:"yellow single-stimulus-icon"})})})});var t=f[e.name];return Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(Ve.a,{onClick:function(){return k(e)},className:"single-stimulus single-stimulus-icon",children:Object(P.jsx)(t,{fontSize:"large",className:"yellow single-stimulus-icon"})})})}return"letter"===e.type?Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(Ve.a,{onClick:function(){return k(e)},className:"single-stimulus single-stimulus-letter",textAlign:"center",children:Object(P.jsxs)(X.a,{type:"span",className:"yellow single-stimuli-letter",children:[" ",e.name," "]})})}):void 0}(v.stimuli[v.trial-1]),"feedback"===v.step&&v.trial>b&&Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[v.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct single-stimulus-icon"}),!v.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect single-stimulus-icon"})]}),"fixation"===v.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"stimulus-fixation single-stimulus-icon"})})]})]})}var tt;n(291);function nt(e){var t=e.content,n=e.onStore,i=e.onProgress,o=(e.onNotification,Object(R.a)().t),r=t.text,c=t.trials,s=t.stimuliDuration,l=t.fixationDuration,u=t.feedbackDuration,d=t.choices,b={star:re.a,circle:ce.a,triangle:Ue.a,rectangle:Ye.a,hand:Je.a,ball:qe.a,watch:Ze.a,school:Qe.a,cup:Xe.a},h=Object(a.useState)({finished:!1,trial:null,step:null,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,trialStartedAt:null,respondedAt:null,stimuli:null,correct:null}),f=Object(p.a)(h,2),O=f[0],g=f[1];Object(a.useEffect)((function(){var e=function(e){var t=e.key,n=e.keyCode;if(null!==O.trial||32!==n&&" "!==t){if("stimuli"===O.step&&(32===n||" "===t)){var a=O.stimuli[O.trial-1];y(a)}}else v()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[O]),Object(a.useEffect)((function(){if(null===O.stimuli){console.log(c);var e=Object(j.a)(Array(c.total).keys()).map((function(e,t){return e<c.go?{trialType:"go",type:d.go.type,name:de(d.go.names)}:{trialType:"nogo",type:d.nogo.type,name:de(d.nogo.names)}}));g(Object(m.a)(Object(m.a)({},O),{},{stimuli:be(e)}))}if("fixation"===O.step&&(clearTimeout(tt),tt=setTimeout((function(){g(Object(m.a)(Object(m.a)({},O),{},{trial:O.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))}),l)),"feedback"===O.step&&(clearTimeout(tt),tt=setTimeout((function(){g(Object(m.a)(Object(m.a)({},O),{},{step:"fixation"}))}),u)),"stimuli"===O.step&&(clearTimeout(tt),tt=setTimeout((function(){var e,t,n=Date.now();console.log("stimuli step timeout. stimuli: %o",O.stimuli[O.trial-1]);var a=null===(e=O.stimuli[O.trial-1])||void 0===e||null===(t=e.trialType)||void 0===t?void 0:t.endsWith("nogo");g(Object(m.a)(Object(m.a)({},O),{},{correct:a,respondedAt:n,trialResponses:[].concat(Object(j.a)(O.trialResponses),[{trial:O.trial,stimuli:O.stimuli[O.trial-1],choice:"noresponse",correct:a,respondedAt:n,trialStartedAt:O.trialStartedAt,rt:null}]),step:u>0?"feedback":"fixation"}))}),s)),i(100*O.trial/c.total),O.trial>c.total&&(console.log("------------ FINISHED -------"),i(100),g(Object(m.a)(Object(m.a)({},O),{},{finished:!0,taskFinishedAt:Date.now()}))),O.finished){clearTimeout(tt);var a={trials:O.trialResponses};a.taskStartedAt=O.taskStartedAt,a.taskFinishedAt=O.taskFinishedAt,a.taskDuration=O.taskFinishedAt-O.taskStartedAt,n({view:t,response:a},!0)}}),[O]);var v=function(){g(Object(m.a)(Object(m.a)({},O),{},{trialResponses:[],trial:0,step:"fixation",taskStartedAt:Date.now()})),console.log("task started. stimuli: %o",O.stimuli)},y=function(e){var t,n,a=Date.now();clearTimeout(tt);var i=!(null!==(t=O.stimuli[O.trial-1])&&void 0!==t&&null!==(n=t.trialType)&&void 0!==n&&n.endsWith("nogo"));g(Object(m.a)(Object(m.a)({},O),{},{correct:i,respondedAt:a,trialResponses:[].concat(Object(j.a)(O.trialResponses),[{trial:O.trial,stimuli:O.stimuli[O.trial-1],choice:e,correct:i,respondedAt:a,trialStartedAt:O.trialStartedAt,rt:a-O.trialStartedAt}]),step:u>0?"feedback":"fixation"}))};return null===O.trial?Object(P.jsxs)(x.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o("gonogoalt.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(T.a,{variant:"outlined",onClick:function(){return v()},children:o("gonogoalt.start")})})]}):Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"gonogoalt-container",children:[Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(L.a,{source:o(r),escapeHtml:!1,className:"markdown-text"})}),Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",className:"nback-main-container",children:["stimuli"===O.step&&function(e){if(console.log("renderStimulus: ",e),null===e||void 0===e)return console.log("figure is null, state:",O),Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"});if("icon"===e.type){if(!b[e.name])return Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(a.Fragment,{children:Object(P.jsx)(Ve.a,{onClick:function(){return y(e)},className:"single-stimulus single-stimulus-icon",children:Object(P.jsx)($e.a,{fontSize:"large",className:"yellow single-stimulus-icon"})})})});var t=b[e.name];return Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(Ve.a,{onClick:function(){return y(e)},className:"single-stimulus single-stimulus-icon",children:Object(P.jsx)(t,{fontSize:"large",className:"yellow single-stimulus-icon"})})})}return"letter"===e.type?Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(Ve.a,{onClick:function(){return y(e)},className:"single-stimulus single-stimulus-letter",textAlign:"center",children:Object(P.jsxs)(X.a,{type:"span",className:"yellow single-stimuli-letter",children:[" ",e.name," "]})})}):void 0}(O.stimuli[O.trial-1]),"feedback"===O.step&&Object(P.jsxs)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[O.correct&&Object(P.jsx)(se.a,{fontSize:"large",className:"correct single-stimulus-icon"}),!O.correct&&Object(P.jsx)(le.a,{fontSize:"large",className:"incorrect single-stimulus-icon"})]}),"fixation"===O.step&&Object(P.jsx)(x.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(P.jsx)(ue.a,{fontSize:"large",className:"single-stimulus-fixation single-stimulus-icon"})})]})]})}function at(e){Z.a.initialize("G-YFD0H08757");var t=Object(R.a)(),n=t.t,i=t.i18n,o=Object(b.g)(),r=o.lang,c=o.studyId,s=new URLSearchParams(Object(b.f)().search),u="rtl"===l[r].direction?I:C,d=Object(a.useRef)(!1),k=Object(a.useState)({subject:void 0,session:void 0,progress:0,finished:!1,loading:!1,view:{},currentViewIndex:0,responses:[],experiment:{}}),w=Object(p.a)(k,2),A=w[0],N=w[1],T=Object(a.useState)(void 0),E=Object(p.a)(T,2),M=E[0],F=E[1],L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("study.storeData",e),t&&W(),N((function(t){return Object(m.a)(Object(m.a)({},t),{},{responses:[].concat(Object(j.a)(t.responses),[e]),loading:!1})}))},_=function(e){var t=e/100;N((function(e){return Object(m.a)(Object(m.a)({},e),{},{progress:100*(e.currentViewIndex+t)/e.experiment.views.length})}))},W=function(){var e;!(A.view.required||(null===(e=A.view.requiredQuestions)||void 0===e?void 0:e.length)>0)||d.current?(d.current=!1,N((function(e){var t=e.currentViewIndex+1;return t<e.experiment.views.length?Object(m.a)(Object(m.a)({},e),{},{loading:!0,progress:100*t/e.experiment.views.length,view:e.experiment.views[t],currentViewIndex:t}):Object(m.a)(Object(m.a)({},e),{},{progress:100,finished:!0,loading:!1})}))):F(n("errors.required"))};return Object(a.useEffect)((function(){i.changeLanguage(r),fetch(""+"/experiments/".concat(c,".json")).then((function(e){return e.json()})).then((function(e){return function(e){console.log("starting experiment",e),console.log("prolific pid : ",s.get("PROLIFIC_PID")),N((function(t){return Object(m.a)(Object(m.a)({},t),{},{startedAt:Date.now(),experiment:e,currentViewIndex:0,view:e.views[0]})})),Z.a.send({hitType:"pageview",page:window.location.pathname,title:"window?.title"})}(e)}))}),[c]),Object(P.jsx)(h.a,{theme:u,children:Object(P.jsxs)("div",{dir:l[r].direction,children:[Object(P.jsx)(f.a,{}),Object(P.jsx)(O.a,{variant:"determinate",value:A.progress}),Object(P.jsx)(g.a,{maxWidth:"sm",className:"study-container",children:Object(P.jsxs)(x.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",className:"study-grid-container",children:[Object(P.jsx)(v.a,{open:void 0!==M,autoHideDuration:5e3,onClose:function(){return F(void 0)},children:Object(P.jsx)(S.a,{onClose:function(){return F(void 0)},severity:"error",children:n(M)})}),Object(P.jsx)(x.a,{item:!0,children:Object(P.jsxs)(y.a,{className:"view-container",children:[!A.finished&&A.loading&&Object(P.jsx)("div",{children:n("loading")}),!A.loading&&function(e){if(A.finished)return Object(P.jsx)(Q,{submission:{PROLIFIC_PID:s.get("PROLIFIC_PID"),STUDY_ID:s.get("STUDY_ID"),SESSION_ID:s.get("SESSION_ID"),startedAt:A.startedAt,responses:A.responses},studyId:c,submissionNote:A.experiment.submissionNote});switch(null===e||void 0===e?void 0:e.type){case"text":return Object(P.jsx)(z,{onStore:L,content:e,onValidate:function(e){return d.current=e}},e.id);case"prolific":return Object(P.jsx)(G,{onStore:L,content:e,onValidate:function(e){return d.current=e}},e.id);case"bart":return Object(P.jsx)(ie,{onStore:L,content:e},e.id);case"gonogo":return Object(P.jsx)(je,{onStore:L,onProgress:_,content:e},e.id);case"stroop":return Object(P.jsx)(he,{onStore:L,content:e},e.id);case"matrix":return Object(P.jsx)(J,{onStore:L,content:e,onValidate:function(e){return d.current=e}},e.id);case"ultimatum":return Object(P.jsx)(_e,{onStore:L,content:e,onNotification:F},e.id);case"dictator":return Object(P.jsx)(ze,{onStore:L,content:e,onNotification:F},e.id);case"taskswitch":return Object(P.jsx)(We,{onStore:L,onProgress:_,content:e,onNotification:F},e.id);case"simplified_taskswitch":return Object(P.jsx)(He,{onStore:L,onProgress:_,content:e,onNotification:F},e.id);case"nback":return Object(P.jsx)(et,{onStore:L,onProgress:_,content:e,onNotification:F},e.id);case"gonogoalt":return Object(P.jsx)(nt,{onStore:L,onProgress:_,content:e,onNotification:F},e.id);default:return Object(P.jsx)("div",{children:"Not Implemented!"})}}(A.view)]})}),!["gonogo","bart","stroop","ultimatum","dictator","taskswitch","simplified_taskswitch","nback","gonogoalt"].includes(A.view.type)&&!A.loading&&Object(P.jsx)(x.a,{item:!0,children:Object(P.jsx)(D,{onNext:W,finished:A.finished,redirectTo:A.experiment.redirectTo})})]})})]})})}function it(){return Object(P.jsx)("div",{className:"about",children:"Hello!"})}n(139);function ot(e){var t=Object(R.a)().t,n=Object(b.g)().studyId;return Object(P.jsxs)(h.a,{theme:C,children:[Object(P.jsx)(f.a,{}),Object(P.jsx)(g.a,{maxWidth:"sm",className:"study-container",children:Object(P.jsx)(x.a,{item:!0,container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",children:Object(P.jsxs)(y.a,{className:"languages-container",children:[Object(P.jsx)(L.a,{source:t("language_selector.text"),escapeHtml:!1,className:"markdown-text"}),Object(P.jsx)(x.a,{container:!0,direction:"row",spacing:3,justifyContent:"space-around",children:Object.entries(l).map((function(e){var t=Object(p.a)(e,2),a=t[0],i=t[1];return Object(P.jsx)(x.a,{item:!0,xs:4,children:Object(P.jsx)(T.a,{component:d.b,to:"/".concat(n,"/").concat(a),fullWidth:!0,variant:"outlined",children:i.title})},a)}))})]})})})]})}function rt(){return Object(P.jsx)(d.a,{basename:"/",children:Object(P.jsxs)(b.c,{children:[Object(P.jsx)(b.a,{exact:!0,path:"/",children:Object(P.jsx)(it,{})}),Object(P.jsx)(b.a,{path:"/:studyId/:lang",children:Object(P.jsx)(at,{})}),Object(P.jsx)(b.a,{path:"/:studyId",children:Object(P.jsx)(ot,{})}),Object(P.jsx)(b.a,{path:"/about",children:Object(P.jsx)(it,{})})]})})}var ct=n(366);o.a.render(Object(P.jsx)(a.Suspense,{fallback:"loading",children:Object(P.jsx)(ct.a,{i18n:u,children:Object(P.jsx)(rt,{})})}),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.32980e45.chunk.js.map